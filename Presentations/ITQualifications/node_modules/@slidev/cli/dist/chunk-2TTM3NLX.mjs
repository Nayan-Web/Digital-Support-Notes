import {
  ViteSlidevPlugin
} from "./chunk-FN2B33RM.mjs";
import {
  init_esm_shims
} from "./chunk-3LH2GTGU.mjs";

// node/server.ts
init_esm_shims();
import { join } from "path";
import { createServer as createViteServer, mergeConfig, resolveConfig } from "vite";
async function createServer(options, viteConfig = {}, serverOptions = {}) {
  const rawConfig = await resolveConfig({}, "serve");
  const pluginOptions = rawConfig.slidev || {};
  process.env.EDITOR = process.env.EDITOR || "code";
  const server = await createViteServer(mergeConfig(viteConfig, {
    optimizeDeps: {
      entries: [
        join(options.clientRoot, "main.ts")
      ]
    },
    plugins: [
      await ViteSlidevPlugin(options, pluginOptions, serverOptions)
    ]
  }));
  return server;
}

export {
  createServer
};
